import sys
sys.stdin = open('14500.txt')

N, M = map(int, input().split())
tetromino = [
    [[0, 1], [0, 2], [0, 3]],
    [[1, 0], [2, 0], [3, 0]],
    [[0, 1], [1, 0], [1, 1]],
    [[1, 0], [2, 0], [2, 1]], 
    [[1, 0], [2, 0], [2, -1]],
    [[0, 1], [0, 2], [1, 0]],
    [[0, 1], [0, 2], [1, 2]],
    [[0, 1], [1, 1], [2, 1]],
    [[0, 1], [1, 0], [2, 0]],
    [[0, 1], [0, 2], [-1, 2]],
    [[1, 0], [1, 1], [1, 2]],
    [[1, 0], [1, 1], [2, 1]],
    [[1, 0], [1, -1], [2, -1]],
    [[0, 1], [-1, 1], [-1, 2]],
    [[0, 1], [1, 1], [1, 2]],
    [[0, 1], [0, 2], [1, 1]],
    [[1, 0], [1, 1], [2, 0]],
    [[1, 0], [1, -1], [2, 0]],
    [[0, 1], [0, 2], [-1, 1]]
]

data = [list(map(int, input().split())) for _ in range(N)]
result = 0

for i in range(N):
    for j in range(M):
        for k in tetromino:
            try:
                sub = data[i][j] + data[i + k[0][0]][j + k[0][1]] + data[i + k[1][0]][j + k[1][1]] + data[i + k[2][0]][j + k[2][1]]
            except:
                sub = 0
            result = max(result, sub)
print(result)

